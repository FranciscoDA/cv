name: Build LaTeX document
on:
  - push
jobs:
  build_latex:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        output-lang: [en, es, en+es]
        include:
          - output-lang: en
            outputlanges: ""
            outputlangen: "1"
          - output-lang: es
            outputlanges: "1"
            outputlangen: ""
          - output-lang: en+es
            outputlanges: "1"
            outputlangen: "1"
    steps:
      - name: Set up Git repository
        uses: actions/checkout@v3
      - name: Compile LaTeX document
        uses: xu-cheng/latex-action@v2
        with:
          latexmk_use_lualatex: true
          args: -usepretex=\def\outputlangen{${{ matrix.outputlangen }}}\def\outputlanges{${{ matrix.outputlanges }}} -jobname=cv_altoe_francisco_(${{ matrix.output-lang }})
          root_file: cv.tex
      - name: Upload PDF files
        uses: actions/upload-artifact@v3
        with:
          name: cv_altoe_francisco
          path: cv_altoe_francisco_(${{ matrix.output-lang}}).pdf
